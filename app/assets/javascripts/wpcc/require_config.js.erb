// VENDOR
//= depend_on_asset jquery/dist/jquery
//= depend_on_asset rsvp/rsvp
//= depend_on_asset eventsWithPromises/src/eventsWithPromises

// MAS
//= depend_on_asset dough/assets/js/lib/featureDetect
//= depend_on_asset dough/assets/js/lib/mediaQueries
//= depend_on_asset dough/assets/js/lib/componentLoader
//= depend_on_asset dough/assets/js/components/DoughBaseComponent
//= depend_on_asset dough/assets/js/constants/DoughEventConstants
//= depend_on_asset dough/assets/js/components/PopupTip
//= depend_on_asset dough/assets/js/components/Validation
//= depend_on_asset dough/assets/js/components/Print
//= depend_on_asset dough/assets/js/components/Collapsable
//= depend_on_asset wpcc/components/ConditionalMessaging
//= depend_on_asset wpcc/components/SalaryConditions
//= depend_on_asset wpcc/components/ContributionConditions
//= depend_on_asset wpcc/components/UpdateResults
//= depend_on_asset wpcc/components/Email

<%
  def requirejs_path(asset)
    javascript_path(asset).sub(/.js\z/, '')
  end
  requirejs_config = {
    paths: {
      componentLoader: requirejs_path('dough/assets/js/lib/componentLoader'),
      DoughBaseComponent: requirejs_path('dough/assets/js/components/DoughBaseComponent'),
      DoughEventConstants: requirejs_path('dough/assets/js/constants/DoughEventConstants'),
      jquery: requirejs_path('jquery/dist/jquery'),
      jqueryThrottleDebounce: requirejs_path('jqueryThrottleDebounce/jquery.ba-throttle-debounce'),
      rsvp: requirejs_path('rsvp/rsvp.js'),
      eventsWithPromises: requirejs_path('eventsWithPromises/src/eventsWithPromises'),
      featureDetect: requirejs_path('dough/assets/js/lib/featureDetect'),
      mediaQueries: requirejs_path('dough/assets/js/lib/mediaQueries'),

      # Dough Components
      PopupTip: requirejs_path('dough/assets/js/components/PopupTip'),
      Validation: requirejs_path('dough/assets/js/components/Validation'),
      Collapsable: requirejs_path('dough/assets/js/components/Collapsable'),
      Print: requirejs_path('dough/assets/js/components/Print'),

      # Non Dough Component
      ConditionalMessaging: requirejs_path('wpcc/components/ConditionalMessaging'),
      SalaryConditions: requirejs_path('wpcc/components/SalaryConditions'),
      ContributionConditions: requirejs_path('wpcc/components/ContributionConditions'),
      UpdateResults: requirejs_path('wpcc/components/UpdateResults'),
      Email: requirejs_path('wpcc/components/Email')
    }
  }
%>

// If requirejs is present convert the requirejs_config hash to a JSON object
if(window.requirejs) {
  requirejs.config(<%= JSON.pretty_generate(requirejs_config) %>);
}
